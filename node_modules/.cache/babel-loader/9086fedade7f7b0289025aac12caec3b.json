{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _relayRuntime = require(\"relay-runtime\");\n\nvar _RelayRequest = _interopRequireDefault(require(\"./RelayRequest\"));\n\nvar _fetchWithMiddleware = _interopRequireDefault(require(\"./fetchWithMiddleware\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar RelayNetworkLayer = function RelayNetworkLayer(middlewares, opts) {\n  var _this = this;\n\n  _classCallCheck(this, RelayNetworkLayer);\n\n  this._middlewares = [];\n  this._rawMiddlewares = [];\n  this._middlewaresSync = [];\n  this.noThrow = false;\n  var mws = Array.isArray(middlewares) ? middlewares : [middlewares];\n  mws.forEach(function (mw) {\n    if (mw) {\n      if (mw.execute) {\n        _this._middlewaresSync.push(mw.execute);\n      } else if (mw.isRawMiddleware) {\n        _this._rawMiddlewares.push(mw);\n      } else {\n        _this._middlewares.push(mw);\n      }\n    }\n  });\n\n  if (opts) {\n    this.subscribeFn = opts.subscribeFn;\n    this.noThrow = opts.noThrow === true; // TODO deprecate\n\n    if (opts.beforeFetch) {\n      this._middlewaresSync.push(opts.beforeFetch);\n    }\n  }\n\n  this.fetchFn = function (operation, variables, cacheConfig, uploadables) {\n    for (var i = 0; i < _this._middlewaresSync.length; i++) {\n      var res = _this._middlewaresSync[i](operation, variables, cacheConfig, uploadables);\n\n      if (res) return res;\n    }\n\n    return {\n      subscribe: function subscribe(sink) {\n        var req = new _RelayRequest[\"default\"](operation, variables, cacheConfig, uploadables);\n        var res = (0, _fetchWithMiddleware[\"default\"])(req, _this._middlewares, _this._rawMiddlewares, _this.noThrow);\n        res.then(function (value) {\n          sink.next(value);\n          sink.complete();\n        }, function (error) {\n          if (error && error.name && error.name === 'AbortError') {\n            sink.complete();\n          } else sink.error(error);\n        }) // avoid unhandled promise rejection error\n        [\"catch\"](function () {});\n        return function () {\n          req.cancel();\n        };\n      }\n    };\n  };\n\n  var network = _relayRuntime.Network.create(this.fetchFn, this.subscribeFn);\n\n  this.execute = network.execute;\n  this.executeWithEvents = network.executeWithEvents;\n};\n\nexports[\"default\"] = RelayNetworkLayer;","map":{"version":3,"names":["Object","defineProperty","exports","value","_relayRuntime","require","_RelayRequest","_interopRequireDefault","_fetchWithMiddleware","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","RelayNetworkLayer","middlewares","opts","_this","_middlewares","_rawMiddlewares","_middlewaresSync","noThrow","mws","Array","isArray","forEach","mw","execute","push","isRawMiddleware","subscribeFn","beforeFetch","fetchFn","operation","variables","cacheConfig","uploadables","i","length","res","subscribe","sink","req","then","next","complete","error","name","cancel","network","Network","create","executeWithEvents"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/react-relay-network-modern/lib/RelayNetworkLayer.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _relayRuntime = require(\"relay-runtime\");\n\nvar _RelayRequest = _interopRequireDefault(require(\"./RelayRequest\"));\n\nvar _fetchWithMiddleware = _interopRequireDefault(require(\"./fetchWithMiddleware\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RelayNetworkLayer = function RelayNetworkLayer(middlewares, opts) {\n  var _this = this;\n\n  _classCallCheck(this, RelayNetworkLayer);\n\n  this._middlewares = [];\n  this._rawMiddlewares = [];\n  this._middlewaresSync = [];\n  this.noThrow = false;\n  var mws = Array.isArray(middlewares) ? middlewares : [middlewares];\n  mws.forEach(function (mw) {\n    if (mw) {\n      if (mw.execute) {\n        _this._middlewaresSync.push(mw.execute);\n      } else if (mw.isRawMiddleware) {\n        _this._rawMiddlewares.push(mw);\n      } else {\n        _this._middlewares.push(mw);\n      }\n    }\n  });\n\n  if (opts) {\n    this.subscribeFn = opts.subscribeFn;\n    this.noThrow = opts.noThrow === true; // TODO deprecate\n\n    if (opts.beforeFetch) {\n      this._middlewaresSync.push(opts.beforeFetch);\n    }\n  }\n\n  this.fetchFn = function (operation, variables, cacheConfig, uploadables) {\n    for (var i = 0; i < _this._middlewaresSync.length; i++) {\n      var res = _this._middlewaresSync[i](operation, variables, cacheConfig, uploadables);\n\n      if (res) return res;\n    }\n\n    return {\n      subscribe: function subscribe(sink) {\n        var req = new _RelayRequest[\"default\"](operation, variables, cacheConfig, uploadables);\n        var res = (0, _fetchWithMiddleware[\"default\"])(req, _this._middlewares, _this._rawMiddlewares, _this.noThrow);\n        res.then(function (value) {\n          sink.next(value);\n          sink.complete();\n        }, function (error) {\n          if (error && error.name && error.name === 'AbortError') {\n            sink.complete();\n          } else sink.error(error);\n        }) // avoid unhandled promise rejection error\n        [\"catch\"](function () {});\n        return function () {\n          req.cancel();\n        };\n      }\n    };\n  };\n\n  var network = _relayRuntime.Network.create(this.fetchFn, this.subscribeFn);\n\n  this.execute = network.execute;\n  this.executeWithEvents = network.executeWithEvents;\n};\n\nexports[\"default\"] = RelayNetworkLayer;"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,aAAa,GAAGC,OAAO,CAAC,eAAD,CAA3B;;AAEA,IAAIC,aAAa,GAAGC,sBAAsB,CAACF,OAAO,CAAC,gBAAD,CAAR,CAA1C;;AAEA,IAAIG,oBAAoB,GAAGD,sBAAsB,CAACF,OAAO,CAAC,uBAAD,CAAR,CAAjD;;AAEA,SAASE,sBAAT,CAAgCE,GAAhC,EAAqC;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;IAAE,WAAWA;EAAb,CAArC;AAA0D;;AAEjG,SAASE,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;IAAE,MAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;EAA2D;AAAE;;AAEzJ,IAAIC,iBAAiB,GAAG,SAASA,iBAAT,CAA2BC,WAA3B,EAAwCC,IAAxC,EAA8C;EACpE,IAAIC,KAAK,GAAG,IAAZ;;EAEAP,eAAe,CAAC,IAAD,EAAOI,iBAAP,CAAf;;EAEA,KAAKI,YAAL,GAAoB,EAApB;EACA,KAAKC,eAAL,GAAuB,EAAvB;EACA,KAAKC,gBAAL,GAAwB,EAAxB;EACA,KAAKC,OAAL,GAAe,KAAf;EACA,IAAIC,GAAG,GAAGC,KAAK,CAACC,OAAN,CAAcT,WAAd,IAA6BA,WAA7B,GAA2C,CAACA,WAAD,CAArD;EACAO,GAAG,CAACG,OAAJ,CAAY,UAAUC,EAAV,EAAc;IACxB,IAAIA,EAAJ,EAAQ;MACN,IAAIA,EAAE,CAACC,OAAP,EAAgB;QACdV,KAAK,CAACG,gBAAN,CAAuBQ,IAAvB,CAA4BF,EAAE,CAACC,OAA/B;MACD,CAFD,MAEO,IAAID,EAAE,CAACG,eAAP,EAAwB;QAC7BZ,KAAK,CAACE,eAAN,CAAsBS,IAAtB,CAA2BF,EAA3B;MACD,CAFM,MAEA;QACLT,KAAK,CAACC,YAAN,CAAmBU,IAAnB,CAAwBF,EAAxB;MACD;IACF;EACF,CAVD;;EAYA,IAAIV,IAAJ,EAAU;IACR,KAAKc,WAAL,GAAmBd,IAAI,CAACc,WAAxB;IACA,KAAKT,OAAL,GAAeL,IAAI,CAACK,OAAL,KAAiB,IAAhC,CAFQ,CAE8B;;IAEtC,IAAIL,IAAI,CAACe,WAAT,EAAsB;MACpB,KAAKX,gBAAL,CAAsBQ,IAAtB,CAA2BZ,IAAI,CAACe,WAAhC;IACD;EACF;;EAED,KAAKC,OAAL,GAAe,UAAUC,SAAV,EAAqBC,SAArB,EAAgCC,WAAhC,EAA6CC,WAA7C,EAA0D;IACvE,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,KAAK,CAACG,gBAAN,CAAuBkB,MAA3C,EAAmDD,CAAC,EAApD,EAAwD;MACtD,IAAIE,GAAG,GAAGtB,KAAK,CAACG,gBAAN,CAAuBiB,CAAvB,EAA0BJ,SAA1B,EAAqCC,SAArC,EAAgDC,WAAhD,EAA6DC,WAA7D,CAAV;;MAEA,IAAIG,GAAJ,EAAS,OAAOA,GAAP;IACV;;IAED,OAAO;MACLC,SAAS,EAAE,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;QAClC,IAAIC,GAAG,GAAG,IAAIrC,aAAa,CAAC,SAAD,CAAjB,CAA6B4B,SAA7B,EAAwCC,SAAxC,EAAmDC,WAAnD,EAAgEC,WAAhE,CAAV;QACA,IAAIG,GAAG,GAAG,CAAC,GAAGhC,oBAAoB,CAAC,SAAD,CAAxB,EAAqCmC,GAArC,EAA0CzB,KAAK,CAACC,YAAhD,EAA8DD,KAAK,CAACE,eAApE,EAAqFF,KAAK,CAACI,OAA3F,CAAV;QACAkB,GAAG,CAACI,IAAJ,CAAS,UAAUzC,KAAV,EAAiB;UACxBuC,IAAI,CAACG,IAAL,CAAU1C,KAAV;UACAuC,IAAI,CAACI,QAAL;QACD,CAHD,EAGG,UAAUC,KAAV,EAAiB;UAClB,IAAIA,KAAK,IAAIA,KAAK,CAACC,IAAf,IAAuBD,KAAK,CAACC,IAAN,KAAe,YAA1C,EAAwD;YACtDN,IAAI,CAACI,QAAL;UACD,CAFD,MAEOJ,IAAI,CAACK,KAAL,CAAWA,KAAX;QACR,CAPD,EAOG;QAPH,CAQC,OARD,EAQU,YAAY,CAAE,CARxB;QASA,OAAO,YAAY;UACjBJ,GAAG,CAACM,MAAJ;QACD,CAFD;MAGD;IAhBI,CAAP;EAkBD,CAzBD;;EA2BA,IAAIC,OAAO,GAAG9C,aAAa,CAAC+C,OAAd,CAAsBC,MAAtB,CAA6B,KAAKnB,OAAlC,EAA2C,KAAKF,WAAhD,CAAd;;EAEA,KAAKH,OAAL,GAAesB,OAAO,CAACtB,OAAvB;EACA,KAAKyB,iBAAL,GAAyBH,OAAO,CAACG,iBAAjC;AACD,CA9DD;;AAgEAnD,OAAO,CAAC,SAAD,CAAP,GAAqBa,iBAArB"},"metadata":{},"sourceType":"script"}
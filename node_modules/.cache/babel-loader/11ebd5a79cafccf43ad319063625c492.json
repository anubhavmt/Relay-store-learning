{"ast":null,"code":"var _ApprootfetchqueryQuery,\n    _s = $RefreshSig$();\n\nimport { fetchQuery, useRelayEnvironment } from \"react-relay/hooks\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appquery = _ApprootfetchqueryQuery !== void 0 ? _ApprootfetchqueryQuery : (_ApprootfetchqueryQuery = require(\"./__generated__/ApprootfetchqueryQuery.graphql\"), _ApprootfetchqueryQuery.hash && _ApprootfetchqueryQuery.hash !== \"8622a73f67895dd9fde4bb1a12cf62e6\" && console.error(\"The definition of 'ApprootfetchqueryQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\"), _ApprootfetchqueryQuery);\n\nconst fetch = env => {\n  const response = fetchQuery(env, appquery, {});\n\n  if ('toPromise' in response) {\n    return response.toPromise();\n  } // Todo: look into the reason for different behaviour in production and local\n\n\n  return response;\n};\n\nconst fetchData = async env => {\n  console.log(env.getStore().getSource().getRecordIDs());\n  console.log(env.getStore().getSource().toJSON());\n  const cachedData = env.getStore().getSource().get(\"anubhav|12345\");\n\n  if (cachedData) {\n    console.log(cachedData);\n    return Promise.resolve(cachedData);\n  }\n\n  const data = await fetch(env);\n  env.getStore().getSource().set(\"anubhav|12345\", data);\n  console.log(data);\n};\n\nconst App = () => {\n  _s();\n\n  fetchData(useRelayEnvironment());\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"fdsafasfsadf\"\n  }, void 0, false);\n};\n\n_s(App, \"L7iZIVNfKRH8iEjvWRY0wlMTDDE=\", false, function () {\n  return [useRelayEnvironment];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["fetchQuery","useRelayEnvironment","appquery","fetch","env","response","toPromise","fetchData","console","log","getStore","getSource","getRecordIDs","toJSON","cachedData","get","Promise","resolve","data","set","App"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/Approotfetchquery.tsx"],"sourcesContent":["import { Environment, fetchQuery, useRelayEnvironment } from \"react-relay/hooks\"\nimport { graphql } from \"babel-plugin-relay/macro\";\n\nconst appquery = graphql`\n# Queries in graphql tags must start with the module name ('App') and end with 'Query'. Got 'allbook' instead.\nquery ApprootfetchqueryQuery {\n  books {\n    ...App_detail\n  }\n}\n`;\n\n\n\nconst fetch =  (env: any) => {\n\n    const response = fetchQuery(env,  appquery ,{})\n\n    if ('toPromise' in response) {\n        return response.toPromise();\n      }\n    \n      // Todo: look into the reason for different behaviour in production and local\n      return response;\n    \n}\n\nconst fetchData =async (env: Environment) => {\n\n\n    console.log(env.getStore().getSource().getRecordIDs())\n    console.log(env.getStore().getSource().toJSON())\n    const cachedData = env.getStore().getSource().get(\"anubhav|12345\");\n    if (cachedData) {\n\n        console.log(cachedData)\n      return Promise.resolve(cachedData);\n    }\n\n    const data = await fetch(env)\n\n    env.getStore().getSource().set(\"anubhav|12345\", data);\n\n    console.log(data)\n    \n}\nconst App = () => {\n\n    fetchData(useRelayEnvironment())\n    \n\n    return <>fdsafasfsadf</>\n}\n\nexport default App"],"mappings":";;;AAAA,SAAsBA,UAAtB,EAAkCC,mBAAlC,QAA6D,mBAA7D;;;AAGA,MAAMC,QAAQ,8bAAd;;AAWA,MAAMC,KAAK,GAAKC,GAAD,IAAc;EAEzB,MAAMC,QAAQ,GAAGL,UAAU,CAACI,GAAD,EAAOF,QAAP,EAAiB,EAAjB,CAA3B;;EAEA,IAAI,eAAeG,QAAnB,EAA6B;IACzB,OAAOA,QAAQ,CAACC,SAAT,EAAP;EACD,CANsB,CAQvB;;;EACA,OAAOD,QAAP;AAEL,CAXD;;AAaA,MAAME,SAAS,GAAE,MAAOH,GAAP,IAA4B;EAGzCI,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,QAAJ,GAAeC,SAAf,GAA2BC,YAA3B,EAAZ;EACAJ,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,QAAJ,GAAeC,SAAf,GAA2BE,MAA3B,EAAZ;EACA,MAAMC,UAAU,GAAGV,GAAG,CAACM,QAAJ,GAAeC,SAAf,GAA2BI,GAA3B,CAA+B,eAA/B,CAAnB;;EACA,IAAID,UAAJ,EAAgB;IAEZN,OAAO,CAACC,GAAR,CAAYK,UAAZ;IACF,OAAOE,OAAO,CAACC,OAAR,CAAgBH,UAAhB,CAAP;EACD;;EAED,MAAMI,IAAI,GAAG,MAAMf,KAAK,CAACC,GAAD,CAAxB;EAEAA,GAAG,CAACM,QAAJ,GAAeC,SAAf,GAA2BQ,GAA3B,CAA+B,eAA/B,EAAgDD,IAAhD;EAEAV,OAAO,CAACC,GAAR,CAAYS,IAAZ;AAEH,CAlBD;;AAmBA,MAAME,GAAG,GAAG,MAAM;EAAA;;EAEdb,SAAS,CAACN,mBAAmB,EAApB,CAAT;EAGA,oBAAO;IAAA;EAAA,iBAAP;AACH,CAND;;GAAMmB,G;UAEQnB,mB;;;KAFRmB,G;AAQN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}
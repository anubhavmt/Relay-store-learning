{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/@babel/runtime/regenerator/index.js\");\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RRNLRetryMiddlewareError = void 0;\nexports[\"default\"] = retryMiddleware;\nexports.delayedExecution = delayedExecution;\nexports.promiseWithTimeout = promiseWithTimeout;\n\nvar _utils = require(\"../utils\");\n\nvar _RRNLError2 = _interopRequireDefault(require(\"../RRNLError\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction noopFn() {}\n\nvar RRNLRetryMiddlewareError = /*#__PURE__*/function (_RRNLError) {\n  _inherits(RRNLRetryMiddlewareError, _RRNLError);\n\n  var _super = _createSuper(RRNLRetryMiddlewareError);\n\n  function RRNLRetryMiddlewareError(msg) {\n    var _this;\n\n    _classCallCheck(this, RRNLRetryMiddlewareError);\n\n    _this = _super.call(this, msg);\n    _this.name = 'RRNLRetryMiddlewareError';\n    return _this;\n  }\n\n  return RRNLRetryMiddlewareError;\n}(_RRNLError2[\"default\"]);\n\nexports.RRNLRetryMiddlewareError = RRNLRetryMiddlewareError;\n\nfunction retryMiddleware(options) {\n  var opts = options || {};\n  var timeout = opts.fetchTimeout || 15000;\n  var retryDelays = opts.retryDelays || [1000, 3000];\n  var statusCodes = opts.statusCodes || false;\n  var logger = opts.logger === false ? function () {} : opts.logger || console.log.bind(console, '[RELAY-NETWORK]');\n  var allowMutations = opts.allowMutations || false;\n  var allowFormData = opts.allowFormData || false;\n  var forceRetryFn = opts.forceRetry || false; // DEPRECATED in favor `beforeRetry`\n\n  var beforeRetry = opts.beforeRetry || false;\n\n  var retryAfterMs = function retryAfterMs() {\n    return false;\n  };\n\n  if (retryDelays) {\n    if (Array.isArray(retryDelays)) {\n      retryAfterMs = function retryAfterMs(attempt) {\n        if (retryDelays.length >= attempt) {\n          return retryDelays[attempt];\n        }\n\n        return false;\n      };\n    } else if ((0, _utils.isFunction)(retryDelays)) {\n      retryAfterMs = retryDelays;\n    }\n  }\n\n  var timeoutAfterMs;\n\n  if (typeof timeout === 'number') {\n    timeoutAfterMs = function timeoutAfterMs() {\n      return timeout;\n    };\n  } else {\n    timeoutAfterMs = timeout;\n  }\n\n  var retryOnStatusCode = function retryOnStatusCode(status, req, res) {\n    return res.status < 200 || res.status > 300;\n  };\n\n  if (statusCodes) {\n    if (Array.isArray(statusCodes)) {\n      retryOnStatusCode = function retryOnStatusCode(status, req, res) {\n        return statusCodes.indexOf(res.status) !== -1;\n      };\n    } else if ((0, _utils.isFunction)(statusCodes)) {\n      retryOnStatusCode = statusCodes;\n    }\n  }\n\n  return function (next) {\n    return function (req) {\n      if (req.isMutation() && !allowMutations) {\n        return next(req);\n      }\n\n      if (req.isFormData() && !allowFormData) {\n        return next(req);\n      }\n\n      return makeRetriableRequest({\n        req: req,\n        next: next,\n        timeoutAfterMs: timeoutAfterMs,\n        retryAfterMs: retryAfterMs,\n        retryOnStatusCode: retryOnStatusCode,\n        forceRetryFn: forceRetryFn,\n        beforeRetry: beforeRetry,\n        logger: logger\n      });\n    };\n  };\n}\n\nfunction makeRetriableRequest(_x) {\n  return _makeRetriableRequest.apply(this, arguments);\n}\n/**\n * This function delays execution of some function for some period of time.\n * Returns a promise, with ability to run execution immidiately, or abort it.\n */\n\n\nfunction _makeRetriableRequest() {\n  _makeRetriableRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(o) {\n    var delay,\n        attempt,\n        lastError,\n        makeRetry,\n        makeRequest,\n        _delayedExecution,\n        promise,\n        forceExec,\n        abort,\n        _args3 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            delay = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : 0;\n            attempt = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : 0;\n            lastError = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : null;\n\n            makeRetry = /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(prevError) {\n                var retryDelay;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        retryDelay = o.retryAfterMs(attempt);\n\n                        if (!retryDelay) {\n                          _context.next = 5;\n                          break;\n                        }\n\n                        o.logger(prevError.message);\n                        o.logger(\"will retry in \".concat(retryDelay, \" milliseconds\"));\n                        return _context.abrupt(\"return\", makeRetriableRequest(o, retryDelay, attempt + 1, prevError));\n\n                      case 5:\n                        throw prevError;\n\n                      case 6:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function makeRetry(_x2) {\n                return _ref.apply(this, arguments);\n              };\n            }();\n\n            makeRequest = /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                var timeout, err;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.prev = 0;\n                        timeout = o.timeoutAfterMs(attempt);\n                        _context2.next = 4;\n                        return promiseWithTimeout(o.next(o.req), timeout, function () {\n                          var err = new RRNLRetryMiddlewareError(\"Reached request timeout in \".concat(timeout, \" ms\"));\n                          return makeRetry(err);\n                        });\n\n                      case 4:\n                        return _context2.abrupt(\"return\", _context2.sent);\n\n                      case 7:\n                        _context2.prev = 7;\n                        _context2.t0 = _context2[\"catch\"](0);\n\n                        if (!(_context2.t0 && !_context2.t0.res && !(_context2.t0 instanceof RRNLRetryMiddlewareError) && _context2.t0.name !== 'AbortError')) {\n                          _context2.next = 11;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", makeRetry(_context2.t0));\n\n                      case 11:\n                        if (!(_context2.t0 && _context2.t0.res && o.retryOnStatusCode(_context2.t0.res.status, o.req, _context2.t0.res))) {\n                          _context2.next = 14;\n                          break;\n                        }\n\n                        err = new RRNLRetryMiddlewareError(\"Wrong response status \".concat(_context2.t0.res.status, \", retrying...\"));\n                        return _context2.abrupt(\"return\", makeRetry(err));\n\n                      case 14:\n                        throw _context2.t0;\n\n                      case 15:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[0, 7]]);\n              }));\n\n              return function makeRequest() {\n                return _ref2.apply(this, arguments);\n              };\n            }();\n\n            if (!(attempt === 0)) {\n              _context3.next = 9;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", makeRequest());\n\n          case 9:\n            // second and all further calls should be delayed\n            _delayedExecution = delayedExecution(makeRequest, delay), promise = _delayedExecution.promise, forceExec = _delayedExecution.forceExec, abort = _delayedExecution.abort;\n\n            if (o.forceRetryFn) {\n              // DEPRECATED in favor `beforeRetry`\n              o.forceRetryFn(forceExec, delay);\n            }\n\n            if (o.beforeRetry) {\n              o.beforeRetry({\n                abort: abort,\n                forceRetry: forceExec,\n                attempt: attempt,\n                delay: delay,\n                lastError: lastError,\n                req: o.req\n              });\n            }\n\n            return _context3.abrupt(\"return\", promise);\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _makeRetriableRequest.apply(this, arguments);\n}\n\nfunction delayedExecution(execFn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var abort = noopFn;\n  var forceExec = noopFn;\n\n  if (delay <= 0) {\n    return {\n      abort: abort,\n      forceExec: forceExec,\n      promise: execFn()\n    };\n  }\n\n  var promise = new Promise(function (resolve, reject) {\n    var delayId;\n\n    abort = function abort(msg) {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = null;\n      }\n\n      reject(new RRNLRetryMiddlewareError(msg || 'Aborted in beforeRetry() callback'));\n    };\n\n    forceExec = function forceExec() {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = null;\n        resolve(execFn());\n      }\n    };\n\n    delayId = setTimeout(function () {\n      resolve(execFn());\n    }, delay);\n  });\n  return {\n    forceExec: forceExec,\n    abort: abort,\n    promise: promise\n  };\n}\n/*\n * This function accepts a Promise and watch for it some period of time (timeoutMS)\n * if Promise completed in this period, then returns its result\n * if not - returns other Promise from onTimeout() callback\n */\n\n\nfunction promiseWithTimeout(promise, timeoutMS, onTimeout) {\n  if (!timeoutMS) {\n    return promise;\n  }\n\n  return new Promise(function (resolve, reject) {\n    var timeoutId = setTimeout(function () {\n      onTimeout().then(resolve)[\"catch\"](reject);\n    }, timeoutMS);\n    promise.then(function (res) {\n      clearTimeout(timeoutId);\n      resolve(res);\n    })[\"catch\"](function (err) {\n      clearTimeout(timeoutId);\n      reject(err);\n    });\n  });\n}","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","RRNLRetryMiddlewareError","retryMiddleware","delayedExecution","promiseWithTimeout","_utils","require","_RRNLError2","_interopRequireDefault","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","create","writable","configurable","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","call","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","noopFn","_RRNLError","_super","msg","_this","name","options","opts","timeout","fetchTimeout","retryDelays","statusCodes","logger","console","log","bind","allowMutations","allowFormData","forceRetryFn","forceRetry","beforeRetry","retryAfterMs","Array","isArray","attempt","length","isFunction","timeoutAfterMs","retryOnStatusCode","status","req","res","indexOf","next","isMutation","isFormData","makeRetriableRequest","_x","_makeRetriableRequest","mark","_callee3","delay","lastError","makeRetry","makeRequest","_delayedExecution","promise","forceExec","abort","_args3","wrap","_callee3$","_context3","prev","_ref","_callee","prevError","retryDelay","_callee$","_context","message","concat","abrupt","stop","_x2","_ref2","_callee2","_callee2$","_context2","sent","t0","execFn","delayId","clearTimeout","setTimeout","timeoutMS","onTimeout","timeoutId"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/react-relay-network-modern/lib/middlewares/retry.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RRNLRetryMiddlewareError = void 0;\nexports[\"default\"] = retryMiddleware;\nexports.delayedExecution = delayedExecution;\nexports.promiseWithTimeout = promiseWithTimeout;\n\nvar _utils = require(\"../utils\");\n\nvar _RRNLError2 = _interopRequireDefault(require(\"../RRNLError\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction noopFn() {}\n\nvar RRNLRetryMiddlewareError = /*#__PURE__*/function (_RRNLError) {\n  _inherits(RRNLRetryMiddlewareError, _RRNLError);\n\n  var _super = _createSuper(RRNLRetryMiddlewareError);\n\n  function RRNLRetryMiddlewareError(msg) {\n    var _this;\n\n    _classCallCheck(this, RRNLRetryMiddlewareError);\n\n    _this = _super.call(this, msg);\n    _this.name = 'RRNLRetryMiddlewareError';\n    return _this;\n  }\n\n  return RRNLRetryMiddlewareError;\n}(_RRNLError2[\"default\"]);\n\nexports.RRNLRetryMiddlewareError = RRNLRetryMiddlewareError;\n\nfunction retryMiddleware(options) {\n  var opts = options || {};\n  var timeout = opts.fetchTimeout || 15000;\n  var retryDelays = opts.retryDelays || [1000, 3000];\n  var statusCodes = opts.statusCodes || false;\n  var logger = opts.logger === false ? function () {} : opts.logger || console.log.bind(console, '[RELAY-NETWORK]');\n  var allowMutations = opts.allowMutations || false;\n  var allowFormData = opts.allowFormData || false;\n  var forceRetryFn = opts.forceRetry || false; // DEPRECATED in favor `beforeRetry`\n\n  var beforeRetry = opts.beforeRetry || false;\n\n  var retryAfterMs = function retryAfterMs() {\n    return false;\n  };\n\n  if (retryDelays) {\n    if (Array.isArray(retryDelays)) {\n      retryAfterMs = function retryAfterMs(attempt) {\n        if (retryDelays.length >= attempt) {\n          return retryDelays[attempt];\n        }\n\n        return false;\n      };\n    } else if ((0, _utils.isFunction)(retryDelays)) {\n      retryAfterMs = retryDelays;\n    }\n  }\n\n  var timeoutAfterMs;\n\n  if (typeof timeout === 'number') {\n    timeoutAfterMs = function timeoutAfterMs() {\n      return timeout;\n    };\n  } else {\n    timeoutAfterMs = timeout;\n  }\n\n  var retryOnStatusCode = function retryOnStatusCode(status, req, res) {\n    return res.status < 200 || res.status > 300;\n  };\n\n  if (statusCodes) {\n    if (Array.isArray(statusCodes)) {\n      retryOnStatusCode = function retryOnStatusCode(status, req, res) {\n        return statusCodes.indexOf(res.status) !== -1;\n      };\n    } else if ((0, _utils.isFunction)(statusCodes)) {\n      retryOnStatusCode = statusCodes;\n    }\n  }\n\n  return function (next) {\n    return function (req) {\n      if (req.isMutation() && !allowMutations) {\n        return next(req);\n      }\n\n      if (req.isFormData() && !allowFormData) {\n        return next(req);\n      }\n\n      return makeRetriableRequest({\n        req: req,\n        next: next,\n        timeoutAfterMs: timeoutAfterMs,\n        retryAfterMs: retryAfterMs,\n        retryOnStatusCode: retryOnStatusCode,\n        forceRetryFn: forceRetryFn,\n        beforeRetry: beforeRetry,\n        logger: logger\n      });\n    };\n  };\n}\n\nfunction makeRetriableRequest(_x) {\n  return _makeRetriableRequest.apply(this, arguments);\n}\n/**\n * This function delays execution of some function for some period of time.\n * Returns a promise, with ability to run execution immidiately, or abort it.\n */\n\n\nfunction _makeRetriableRequest() {\n  _makeRetriableRequest = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(o) {\n    var delay,\n        attempt,\n        lastError,\n        makeRetry,\n        makeRequest,\n        _delayedExecution,\n        promise,\n        forceExec,\n        abort,\n        _args3 = arguments;\n\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            delay = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : 0;\n            attempt = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : 0;\n            lastError = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : null;\n\n            makeRetry = /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(prevError) {\n                var retryDelay;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        retryDelay = o.retryAfterMs(attempt);\n\n                        if (!retryDelay) {\n                          _context.next = 5;\n                          break;\n                        }\n\n                        o.logger(prevError.message);\n                        o.logger(\"will retry in \".concat(retryDelay, \" milliseconds\"));\n                        return _context.abrupt(\"return\", makeRetriableRequest(o, retryDelay, attempt + 1, prevError));\n\n                      case 5:\n                        throw prevError;\n\n                      case 6:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function makeRetry(_x2) {\n                return _ref.apply(this, arguments);\n              };\n            }();\n\n            makeRequest = /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                var timeout, err;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.prev = 0;\n                        timeout = o.timeoutAfterMs(attempt);\n                        _context2.next = 4;\n                        return promiseWithTimeout(o.next(o.req), timeout, function () {\n                          var err = new RRNLRetryMiddlewareError(\"Reached request timeout in \".concat(timeout, \" ms\"));\n                          return makeRetry(err);\n                        });\n\n                      case 4:\n                        return _context2.abrupt(\"return\", _context2.sent);\n\n                      case 7:\n                        _context2.prev = 7;\n                        _context2.t0 = _context2[\"catch\"](0);\n\n                        if (!(_context2.t0 && !_context2.t0.res && !(_context2.t0 instanceof RRNLRetryMiddlewareError) && _context2.t0.name !== 'AbortError')) {\n                          _context2.next = 11;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\", makeRetry(_context2.t0));\n\n                      case 11:\n                        if (!(_context2.t0 && _context2.t0.res && o.retryOnStatusCode(_context2.t0.res.status, o.req, _context2.t0.res))) {\n                          _context2.next = 14;\n                          break;\n                        }\n\n                        err = new RRNLRetryMiddlewareError(\"Wrong response status \".concat(_context2.t0.res.status, \", retrying...\"));\n                        return _context2.abrupt(\"return\", makeRetry(err));\n\n                      case 14:\n                        throw _context2.t0;\n\n                      case 15:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[0, 7]]);\n              }));\n\n              return function makeRequest() {\n                return _ref2.apply(this, arguments);\n              };\n            }();\n\n            if (!(attempt === 0)) {\n              _context3.next = 9;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", makeRequest());\n\n          case 9:\n            // second and all further calls should be delayed\n            _delayedExecution = delayedExecution(makeRequest, delay), promise = _delayedExecution.promise, forceExec = _delayedExecution.forceExec, abort = _delayedExecution.abort;\n\n            if (o.forceRetryFn) {\n              // DEPRECATED in favor `beforeRetry`\n              o.forceRetryFn(forceExec, delay);\n            }\n\n            if (o.beforeRetry) {\n              o.beforeRetry({\n                abort: abort,\n                forceRetry: forceExec,\n                attempt: attempt,\n                delay: delay,\n                lastError: lastError,\n                req: o.req\n              });\n            }\n\n            return _context3.abrupt(\"return\", promise);\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _makeRetriableRequest.apply(this, arguments);\n}\n\nfunction delayedExecution(execFn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var abort = noopFn;\n  var forceExec = noopFn;\n\n  if (delay <= 0) {\n    return {\n      abort: abort,\n      forceExec: forceExec,\n      promise: execFn()\n    };\n  }\n\n  var promise = new Promise(function (resolve, reject) {\n    var delayId;\n\n    abort = function abort(msg) {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = null;\n      }\n\n      reject(new RRNLRetryMiddlewareError(msg || 'Aborted in beforeRetry() callback'));\n    };\n\n    forceExec = function forceExec() {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = null;\n        resolve(execFn());\n      }\n    };\n\n    delayId = setTimeout(function () {\n      resolve(execFn());\n    }, delay);\n  });\n  return {\n    forceExec: forceExec,\n    abort: abort,\n    promise: promise\n  };\n}\n/*\n * This function accepts a Promise and watch for it some period of time (timeoutMS)\n * if Promise completed in this period, then returns its result\n * if not - returns other Promise from onTimeout() callback\n */\n\n\nfunction promiseWithTimeout(promise, timeoutMS, onTimeout) {\n  if (!timeoutMS) {\n    return promise;\n  }\n\n  return new Promise(function (resolve, reject) {\n    var timeoutId = setTimeout(function () {\n      onTimeout().then(resolve)[\"catch\"](reject);\n    }, timeoutMS);\n    promise.then(function (res) {\n      clearTimeout(timeoutId);\n      resolve(res);\n    })[\"catch\"](function (err) {\n      clearTimeout(timeoutId);\n      reject(err);\n    });\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}
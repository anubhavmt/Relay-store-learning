{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _default(graphqlHTTPMiddleware) {\n  return function (req, res) {\n    var subResponses = [];\n    return Promise.all(req.body.map(function (data) {\n      return new Promise(function (resolve) {\n        var subRequest = _objectSpread(_objectSpread({\n          __proto__: req.__proto__\n        }, req), {}, {\n          body: data\n        });\n\n        var subResponse = _objectSpread(_objectSpread({}, res), {}, {\n          status: function status(st) {\n            this.statusCode = st;\n            return this;\n          },\n          set: function set() {\n            return this;\n          },\n          send: function send(payload) {\n            resolve({\n              status: this.statusCode,\n              id: data.id,\n              payload: payload\n            });\n          },\n          // support express-graphql@0.5.2\n          setHeader: function setHeader() {\n            return this;\n          },\n          header: function header() {},\n          write: function write(payload) {\n            this.payload = payload;\n          },\n          end: function end(payload) {\n            // support express-graphql@0.5.4\n            if (payload) {\n              this.payload = payload;\n            }\n\n            resolve({\n              status: this.statusCode,\n              id: data.id,\n              payload: this.payload\n            });\n          }\n        });\n\n        subResponses.push(subResponse);\n        graphqlHTTPMiddleware(subRequest, subResponse);\n      });\n    })).then(function (responses) {\n      var response = '';\n      responses.forEach(function (_ref, idx) {\n        var status = _ref.status,\n            id = _ref.id,\n            payload = _ref.payload;\n\n        if (status) {\n          res.status(status);\n        }\n\n        var comma = responses.length - 1 > idx ? ',' : '';\n        response += \"{ \\\"id\\\":\\\"\".concat(id, \"\\\", \\\"payload\\\":\").concat(payload, \" }\").concat(comma);\n      });\n      res.set('Content-Type', 'application/json');\n      res.send(\"[\".concat(response, \"]\"));\n    })[\"catch\"](function (err) {\n      res.status(500).send({\n        error: err.message\n      });\n    });\n  };\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","_default","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","configurable","writable","graphqlHTTPMiddleware","req","res","subResponses","Promise","all","body","map","data","resolve","subRequest","__proto__","subResponse","status","st","statusCode","set","send","payload","id","setHeader","header","write","end","then","responses","response","_ref","idx","comma","concat","err","error","message"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/react-relay-network-modern/lib/express-middleware/graphqlBatchHTTPWrapper.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _default(graphqlHTTPMiddleware) {\n  return function (req, res) {\n    var subResponses = [];\n    return Promise.all(req.body.map(function (data) {\n      return new Promise(function (resolve) {\n        var subRequest = _objectSpread(_objectSpread({\n          __proto__: req.__proto__\n        }, req), {}, {\n          body: data\n        });\n\n        var subResponse = _objectSpread(_objectSpread({}, res), {}, {\n          status: function status(st) {\n            this.statusCode = st;\n            return this;\n          },\n          set: function set() {\n            return this;\n          },\n          send: function send(payload) {\n            resolve({\n              status: this.statusCode,\n              id: data.id,\n              payload: payload\n            });\n          },\n          // support express-graphql@0.5.2\n          setHeader: function setHeader() {\n            return this;\n          },\n          header: function header() {},\n          write: function write(payload) {\n            this.payload = payload;\n          },\n          end: function end(payload) {\n            // support express-graphql@0.5.4\n            if (payload) {\n              this.payload = payload;\n            }\n\n            resolve({\n              status: this.statusCode,\n              id: data.id,\n              payload: this.payload\n            });\n          }\n        });\n\n        subResponses.push(subResponse);\n        graphqlHTTPMiddleware(subRequest, subResponse);\n      });\n    })).then(function (responses) {\n      var response = '';\n      responses.forEach(function (_ref, idx) {\n        var status = _ref.status,\n            id = _ref.id,\n            payload = _ref.payload;\n\n        if (status) {\n          res.status(status);\n        }\n\n        var comma = responses.length - 1 > idx ? ',' : '';\n        response += \"{ \\\"id\\\":\\\"\".concat(id, \"\\\", \\\"payload\\\":\").concat(payload, \" }\").concat(comma);\n      });\n      res.set('Content-Type', 'application/json');\n      res.send(\"[\".concat(response, \"]\"));\n    })[\"catch\"](function (err) {\n      res.status(500).send({\n        error: err.message\n      });\n    });\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}
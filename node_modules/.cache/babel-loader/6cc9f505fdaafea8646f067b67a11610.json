{"ast":null,"code":"import { Environment, RecordSource, Store, DefaultHandlerProvider } from \"relay-runtime\";\nimport { RelayNetworkLayer, loggerMiddleware, cacheMiddleware, urlMiddleware } from 'react-relay-network-modern';\nconst url = \"http://localhost:4444/\"; // function fetchQuery(operation: RequestParameters, variables: Variables) {\n//   return fetch(url, {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//     body: JSON.stringify({\n//       query: operation.text,\n//       variables,\n//     }),\n//   }).then((response) => {\n//     return response.json();\n//   });\n// }\n\nconst logger = console.log.bind(console, \"[RELAY-API-CALL]\");\n\nfunction handlerProviderHelper(handlerProvider) {\n  return handle => {\n    const Provider = handlerProvider(handle);\n\n    if (Provider) {\n      return Provider;\n    } else {\n      return DefaultHandlerProvider(handle);\n    }\n  };\n}\n\nconst network = new RelayNetworkLayer([cacheMiddleware({\n  size: 0,\n  // max 100 requests\n  ttl: 90 // 15 minutes\n\n}), urlMiddleware({\n  url: \"http://localhost:4444/\"\n}), loggerMiddleware({\n  logger\n})]);\nconst environment = new Environment({\n  handlerProvider: handlerProviderHelper(DefaultHandlerProvider),\n  network: network,\n  store: new Store(new RecordSource())\n});\nexport default environment;","map":{"version":3,"names":["Environment","RecordSource","Store","DefaultHandlerProvider","RelayNetworkLayer","loggerMiddleware","cacheMiddleware","urlMiddleware","url","logger","console","log","bind","handlerProviderHelper","handlerProvider","handle","Provider","network","size","ttl","environment","store"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/RelayEnvironment.ts"],"sourcesContent":["import {\n  Environment,\n  Network,\n  RecordSource,\n  RequestParameters,\n  Store,\n  Variables,\n  DefaultHandlerProvider\n} from \"relay-runtime\";\nimport { HandlerProvider } from \"relay-runtime/lib/handlers/RelayDefaultHandlerProvider\";\nimport { RelayNetworkLayer,loggerMiddleware, cacheMiddleware, urlMiddleware } from 'react-relay-network-modern'\nconst url = \"http://localhost:4444/\";\n\n// function fetchQuery(operation: RequestParameters, variables: Variables) {\n//   return fetch(url, {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//     body: JSON.stringify({\n//       query: operation.text,\n//       variables,\n//     }),\n//   }).then((response) => {\n//     return response.json();\n//   });\n// }\n\nconst logger = console.log.bind(console, \"[RELAY-API-CALL]\");\n\nfunction handlerProviderHelper(handlerProvider: HandlerProvider) {\n  return (handle: string) => {\n    const Provider = handlerProvider(handle);\n    if (Provider) {\n      return Provider;\n    } else {\n      return DefaultHandlerProvider(handle);\n    }\n  };\n}\n\nconst network = new RelayNetworkLayer(\n  [\n    cacheMiddleware({\n      size: 0, // max 100 requests\n      ttl: 90, // 15 minutes\n    }),\n    urlMiddleware({\n      url: \"http://localhost:4444/\",\n    }),\n    loggerMiddleware({\n      logger,\n    })\n  ]\n);\n\nconst environment = new Environment({\n  handlerProvider: handlerProviderHelper(DefaultHandlerProvider),\n  network: network,\n  store: new Store(new RecordSource()),\n});\n\nexport default environment;\n"],"mappings":"AAAA,SACEA,WADF,EAGEC,YAHF,EAKEC,KALF,EAOEC,sBAPF,QAQO,eARP;AAUA,SAASC,iBAAT,EAA2BC,gBAA3B,EAA6CC,eAA7C,EAA8DC,aAA9D,QAAmF,4BAAnF;AACA,MAAMC,GAAG,GAAG,wBAAZ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,CAAiBF,OAAjB,EAA0B,kBAA1B,CAAf;;AAEA,SAASG,qBAAT,CAA+BC,eAA/B,EAAiE;EAC/D,OAAQC,MAAD,IAAoB;IACzB,MAAMC,QAAQ,GAAGF,eAAe,CAACC,MAAD,CAAhC;;IACA,IAAIC,QAAJ,EAAc;MACZ,OAAOA,QAAP;IACD,CAFD,MAEO;MACL,OAAOb,sBAAsB,CAACY,MAAD,CAA7B;IACD;EACF,CAPD;AAQD;;AAED,MAAME,OAAO,GAAG,IAAIb,iBAAJ,CACd,CACEE,eAAe,CAAC;EACdY,IAAI,EAAE,CADQ;EACL;EACTC,GAAG,EAAE,EAFS,CAEL;;AAFK,CAAD,CADjB,EAKEZ,aAAa,CAAC;EACZC,GAAG,EAAE;AADO,CAAD,CALf,EAQEH,gBAAgB,CAAC;EACfI;AADe,CAAD,CARlB,CADc,CAAhB;AAeA,MAAMW,WAAW,GAAG,IAAIpB,WAAJ,CAAgB;EAClCc,eAAe,EAAED,qBAAqB,CAACV,sBAAD,CADJ;EAElCc,OAAO,EAAEA,OAFyB;EAGlCI,KAAK,EAAE,IAAInB,KAAJ,CAAU,IAAID,YAAJ,EAAV;AAH2B,CAAhB,CAApB;AAMA,eAAemB,WAAf"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Environment, RecordSource, Store, DefaultHandlerProvider } from \"relay-runtime\";\nimport { RelayNetworkLayer, cacheMiddleware, urlMiddleware } from 'react-relay-network-modern';\nconst url = \"http://localhost:4444/\";\n\nfunction fetchQuery(operation, variables) {\n  return fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      query: operation.text,\n      variables\n    })\n  }).then(response => {\n    return response.json();\n  });\n}\n\nfunction handlerProviderHelper(handlerProvider) {\n  return handle => {\n    const Provider = handlerProvider(handle);\n\n    if (Provider) {\n      return Provider;\n    } else {\n      return DefaultHandlerProvider(handle);\n    }\n  };\n}\n\nconst network = new RelayNetworkLayer([cacheMiddleware({\n  size: 100,\n  // max 100 requests\n  ttl: 900000 // 15 minutes\n\n}), urlMiddleware({\n  url: \"http://localhost:4444/\"\n})]);\nconst environment = new Environment({\n  handlerProvider: handlerProviderHelper(DefaultHandlerProvider),\n  network: network,\n  store: new Store(new RecordSource())\n});\nexport default environment;","map":{"version":3,"names":["Environment","RecordSource","Store","DefaultHandlerProvider","RelayNetworkLayer","cacheMiddleware","urlMiddleware","url","fetchQuery","operation","variables","fetch","method","headers","body","JSON","stringify","query","text","then","response","json","handlerProviderHelper","handlerProvider","handle","Provider","network","size","ttl","environment","store"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/RelayEnvironment.ts"],"sourcesContent":["import {\n  Environment,\n  Network,\n  RecordSource,\n  RequestParameters,\n  Store,\n  Variables,\n  DefaultHandlerProvider\n} from \"relay-runtime\";\nimport { HandlerProvider } from \"relay-runtime/lib/handlers/RelayDefaultHandlerProvider\";\nimport { RelayNetworkLayer, cacheMiddleware, urlMiddleware } from 'react-relay-network-modern'\nconst url = \"http://localhost:4444/\";\n\nfunction fetchQuery(operation: RequestParameters, variables: Variables) {\n  return fetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: operation.text,\n      variables,\n    }),\n  }).then((response) => {\n    return response.json();\n  });\n}\n\n\nfunction handlerProviderHelper(handlerProvider: HandlerProvider) {\n  return (handle: string) => {\n    const Provider = handlerProvider(handle);\n    if (Provider) {\n      return Provider;\n    } else {\n      return DefaultHandlerProvider(handle);\n    }\n  };\n}\n\nconst network = new RelayNetworkLayer(\n  [\n    cacheMiddleware({\n      size: 100, // max 100 requests\n      ttl: 900000, // 15 minutes\n    }),\n    urlMiddleware({\n      url: \"http://localhost:4444/\",\n    })\n  ]\n);\n\nconst environment = new Environment({\n  handlerProvider: handlerProviderHelper(DefaultHandlerProvider),\n  network: network,\n  store: new Store(new RecordSource()),\n});\n\nexport default environment;\n"],"mappings":"AAAA,SACEA,WADF,EAGEC,YAHF,EAKEC,KALF,EAOEC,sBAPF,QAQO,eARP;AAUA,SAASC,iBAAT,EAA4BC,eAA5B,EAA6CC,aAA7C,QAAkE,4BAAlE;AACA,MAAMC,GAAG,GAAG,wBAAZ;;AAEA,SAASC,UAAT,CAAoBC,SAApB,EAAkDC,SAAlD,EAAwE;EACtE,OAAOC,KAAK,CAACJ,GAAD,EAAM;IAChBK,MAAM,EAAE,MADQ;IAEhBC,OAAO,EAAE;MACP,gBAAgB;IADT,CAFO;IAKhBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MACnBC,KAAK,EAAER,SAAS,CAACS,IADE;MAEnBR;IAFmB,CAAf;EALU,CAAN,CAAL,CASJS,IATI,CASEC,QAAD,IAAc;IACpB,OAAOA,QAAQ,CAACC,IAAT,EAAP;EACD,CAXM,CAAP;AAYD;;AAGD,SAASC,qBAAT,CAA+BC,eAA/B,EAAiE;EAC/D,OAAQC,MAAD,IAAoB;IACzB,MAAMC,QAAQ,GAAGF,eAAe,CAACC,MAAD,CAAhC;;IACA,IAAIC,QAAJ,EAAc;MACZ,OAAOA,QAAP;IACD,CAFD,MAEO;MACL,OAAOtB,sBAAsB,CAACqB,MAAD,CAA7B;IACD;EACF,CAPD;AAQD;;AAED,MAAME,OAAO,GAAG,IAAItB,iBAAJ,CACd,CACEC,eAAe,CAAC;EACdsB,IAAI,EAAE,GADQ;EACH;EACXC,GAAG,EAAE,MAFS,CAED;;AAFC,CAAD,CADjB,EAKEtB,aAAa,CAAC;EACZC,GAAG,EAAE;AADO,CAAD,CALf,CADc,CAAhB;AAYA,MAAMsB,WAAW,GAAG,IAAI7B,WAAJ,CAAgB;EAClCuB,eAAe,EAAED,qBAAqB,CAACnB,sBAAD,CADJ;EAElCuB,OAAO,EAAEA,OAFyB;EAGlCI,KAAK,EAAE,IAAI5B,KAAJ,CAAU,IAAID,YAAJ,EAAV;AAH2B,CAAhB,CAApB;AAMA,eAAe4B,WAAf"},"metadata":{},"sourceType":"module"}
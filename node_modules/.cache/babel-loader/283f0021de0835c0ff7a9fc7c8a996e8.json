{"ast":null,"code":"var _ApprootfetchqueryQuery,\n    _s = $RefreshSig$();\n\nimport { fetchQuery, useRelayEnvironment } from \"react-relay/hooks\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appquery = _ApprootfetchqueryQuery !== void 0 ? _ApprootfetchqueryQuery : (_ApprootfetchqueryQuery = require(\"./__generated__/ApprootfetchqueryQuery.graphql\"), _ApprootfetchqueryQuery.hash && _ApprootfetchqueryQuery.hash !== \"8622a73f67895dd9fde4bb1a12cf62e6\" && console.error(\"The definition of 'ApprootfetchqueryQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\"), _ApprootfetchqueryQuery);\n\nconst fetch = env => {\n  const response = fetchQuery(env, appquery, {});\n\n  if ('toPromise' in response) {\n    return response.toPromise();\n  } // Todo: look into the reason for different behaviour in production and local\n\n\n  return response;\n};\n\nconst fetchData = async env => {\n  const cachedData = env.getStore().getSource().get(\"1\"); // so if we want to check manuaaly then must have id of that\n\n  if (cachedData) {\n    console.log(cachedData);\n    return Promise.resolve(cachedData);\n  }\n\n  const data = await fetch(env); // env.getStore().getSource().set(\"anubhav|12345\", data);  // error since set not exist in getSource return type, don't why how , but it set record if env is not of Environment Type\n\n  console.log(data);\n};\n\nconst App = () => {\n  _s();\n\n  fetchData(useRelayEnvironment());\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: \"fdsafasfsadf\"\n  }, void 0, false);\n};\n\n_s(App, \"L7iZIVNfKRH8iEjvWRY0wlMTDDE=\", false, function () {\n  return [useRelayEnvironment];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["fetchQuery","useRelayEnvironment","appquery","fetch","env","response","toPromise","fetchData","cachedData","getStore","getSource","get","console","log","Promise","resolve","data","App"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/Approotfetchquery.tsx"],"sourcesContent":["import { Environment, fetchQuery, useRelayEnvironment } from \"react-relay/hooks\"\nimport { graphql } from \"babel-plugin-relay/macro\";\n\nconst appquery = graphql`\n# Queries in graphql tags must start with the module name ('App') and end with 'Query'. Got 'allbook' instead.\nquery ApprootfetchqueryQuery {\n  books {\n    ...App_detail\n  }\n}\n`;\n\n\n\nconst fetch =  (env: any) => {\n\n    const response = fetchQuery(env,  appquery ,{})\n\n    if ('toPromise' in response) {\n        return response.toPromise();\n      }\n    \n      // Todo: look into the reason for different behaviour in production and local\n      return response;\n    \n}\n\nconst fetchData =async (env: any) => {\n\n\n    const cachedData = env.getStore().getSource().get(\"1\");   // so if we want to check manuaaly then must have id of that\n    if (cachedData) {\n        console.log(cachedData)\n      return Promise.resolve(cachedData);\n    }\n\n    const data = await fetch(env)\n\n    // env.getStore().getSource().set(\"anubhav|12345\", data);  // error since set not exist in getSource return type, don't why how , but it set record if env is not of Environment Type\n\n    console.log(data)\n    \n}\nconst App = () => {\n\n    fetchData(useRelayEnvironment())\n    \n\n    return <>fdsafasfsadf</>\n}\n\nexport default App"],"mappings":";;;AAAA,SAAsBA,UAAtB,EAAkCC,mBAAlC,QAA6D,mBAA7D;;;AAGA,MAAMC,QAAQ,8bAAd;;AAWA,MAAMC,KAAK,GAAKC,GAAD,IAAc;EAEzB,MAAMC,QAAQ,GAAGL,UAAU,CAACI,GAAD,EAAOF,QAAP,EAAiB,EAAjB,CAA3B;;EAEA,IAAI,eAAeG,QAAnB,EAA6B;IACzB,OAAOA,QAAQ,CAACC,SAAT,EAAP;EACD,CANsB,CAQvB;;;EACA,OAAOD,QAAP;AAEL,CAXD;;AAaA,MAAME,SAAS,GAAE,MAAOH,GAAP,IAAoB;EAGjC,MAAMI,UAAU,GAAGJ,GAAG,CAACK,QAAJ,GAAeC,SAAf,GAA2BC,GAA3B,CAA+B,GAA/B,CAAnB,CAHiC,CAGyB;;EAC1D,IAAIH,UAAJ,EAAgB;IACZI,OAAO,CAACC,GAAR,CAAYL,UAAZ;IACF,OAAOM,OAAO,CAACC,OAAR,CAAgBP,UAAhB,CAAP;EACD;;EAED,MAAMQ,IAAI,GAAG,MAAMb,KAAK,CAACC,GAAD,CAAxB,CATiC,CAWjC;;EAEAQ,OAAO,CAACC,GAAR,CAAYG,IAAZ;AAEH,CAfD;;AAgBA,MAAMC,GAAG,GAAG,MAAM;EAAA;;EAEdV,SAAS,CAACN,mBAAmB,EAApB,CAAT;EAGA,oBAAO;IAAA;EAAA,iBAAP;AACH,CAND;;GAAMgB,G;UAEQhB,mB;;;KAFRgB,G;AAQN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}
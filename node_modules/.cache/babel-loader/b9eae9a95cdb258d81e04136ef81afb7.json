{"ast":null,"code":"var _ApprootQuery,\n    _ApprootupdateBookQuery,\n    _jsxFileName = \"/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/Approot.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport App from \"./App\";\nimport { useLazyLoadQuery, useMutation, useRelayEnvironment } from \"react-relay/hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appquery = _ApprootQuery !== void 0 ? _ApprootQuery : (_ApprootQuery = require(\"./__generated__/ApprootQuery.graphql\"), _ApprootQuery.hash && _ApprootQuery.hash !== \"938e991c903a95d18e0391148e59f080\" && console.error(\"The definition of 'ApprootQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\"), _ApprootQuery);\nconst appMutateupdatequery = _ApprootupdateBookQuery !== void 0 ? _ApprootupdateBookQuery : (_ApprootupdateBookQuery = require(\"./__generated__/ApprootupdateBookQuery.graphql\"), _ApprootupdateBookQuery.hash && _ApprootupdateBookQuery.hash !== \"aecc280cb9a2b888276e1b2838ab4522\" && console.error(\"The definition of 'ApprootupdateBookQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data.\"), _ApprootupdateBookQuery);\n\nfunction Approot(props) {\n  _s();\n\n  const [commitupdate] = useMutation(appMutateupdatequery);\n  const data = useLazyLoadQuery(appquery, {}, {\n    fetchPolicy: 'store-or-network'\n  }); // console.log(\"approot......\")\n  // console.log(data);\n\n  /*\n   The useRelayEnvironment().getStore() function returns a Store object from the Relay Modern library. The type of object returned depends on the method called on the Store object.\n   Calling getStore().getSource() returns a RecordSource object, which is an interface for reading and writing records in the store.\n   Calling getStore().getSource().get(<dataID>) returns a RecordProxy object, which is a mutable interface for a single record in the store with the specified dataID.\n   Calling getStore().getSource().get(<selector>) returns a RecordSourceSelectorProxy object, which is a mutable interface for a set of records in the store that match the specified selector.\n   So, depending on which method is called on the Store object, the returned type could be either a RecordProxy or a RecordSourceSelectorProxy.\n  \n   RelayModernStore is a central store for managing the data cache of a Relay application, \n  while RelayRecordSourceSelectorProxy is a lower-level API for reading from and writing to\n  specific pieces of data in the store.\n  \n    */\n\n  /*\n   Doc refering: \n   */\n\n  console.log(\"Type: RelayModernStore\");\n  console.log(useRelayEnvironment().getStore());\n  console.log(\"Type: RelayRecordSource\");\n  console.log(useRelayEnvironment().getStore().getSource()); // console.log(typeof useRelayEnvironment().getStore().getSource())\n  // console.log(useRelayEnvironment().getStore().getSource())\n  // console.log(typeof useRelayEnvironment().getStore().getSource().get(\"1\"))\n  // console.log(useRelayEnvironment().getStore().getSource().get(\"1\"))\n  // console.log(typeof useRelayEnvironment().getStore().getSource().getRecordIDs())\n  // console.log(useRelayEnvironment().getStore().getSource().getRecordIDs())\n\n  return /*#__PURE__*/_jsxDEV(React.Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading.....\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 31\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(App, {\n      books: data.books[0]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: e => {\n        e.preventDefault();\n        let update = {\n          id: e.target[0].value,\n          book: {\n            id: e.target[0].value,\n            title: e.target[1].value,\n            author: {\n              id: e.target[2].value,\n              firstname: e.target[3].value,\n              secondname: e.target[4].value\n            }\n          }\n        };\n        commitupdate({\n          variables: update,\n          onCompleted: (response, errors) => {\n            console.log(\"Response received from server.\");\n          },\n          updater: store => {\n            console.log(\"in mutaiton\");\n            console.log(\"Type: RelayRecordSourceSelectorProxy\");\n            console.log(store);\n            window.store = store;\n          },\n          onError: err => console.error(err)\n        });\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fname\",\n        children: \"Book id:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"fname\",\n        placeholder: \"Type Book id\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 71\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fname\",\n        children: \"Book title:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fname\",\n        placeholder: \"Type Book title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 72\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fname\",\n        children: \"This author id:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fname\",\n        placeholder: \"Type Book title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 72\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fname\",\n        children: \"Author firstname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fname\",\n        placeholder: \"Type Book title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 72\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fname\",\n        children: \"Author secondname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"fname\",\n        placeholder: \"Type Book title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 72\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Approot, \"HybEJdq6RK3UP0obavfPsDi7NQ4=\", false, function () {\n  return [useMutation, useLazyLoadQuery, useRelayEnvironment, useRelayEnvironment];\n});\n\n_c = Approot;\nexport default Approot;\n\nvar _c;\n\n$RefreshReg$(_c, \"Approot\");","map":{"version":3,"names":["React","App","useLazyLoadQuery","useMutation","useRelayEnvironment","appquery","appMutateupdatequery","Approot","props","commitupdate","data","fetchPolicy","console","log","getStore","getSource","books","e","preventDefault","update","id","target","value","book","title","author","firstname","secondname","variables","onCompleted","response","errors","updater","store","window","onError","err","error"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/src/Approot.tsx"],"sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport App from \"./App\";\nimport { graphql } from \"babel-plugin-relay/macro\";\nimport { useLazyLoadQuery, useMutation, useRelayEnvironment } from \"react-relay/hooks\";\nimport { RecordSourceSelectorProxy, Store } from \"relay-runtime\";\nimport {\n  ApprootQuery,\n  ApprootQuery$data,\n  ApprootQuery$variables,\n} from \"./__generated__/ApprootQuery.graphql\";\nimport {\n  ApprootupdateBookQuery,\n  ApprootupdateBookQuery$variables,\n} from \"./__generated__/ApprootupdateBookQuery.graphql\";\n\nconst appquery = graphql`\n  # Queries in graphql tags must start with the module name ('App') and end with 'Query'. Got 'allbook' instead.\n  query ApprootQuery {\n    books {\n      id\n      ...App_detail\n    }\n  }\n`;\n\nconst appMutateupdatequery = graphql`\n  # Queries in graphql tags must start with the module name ('App') and end with 'Query'. Got 'allbook' instead.\n\n  mutation ApprootupdateBookQuery($id: ID!, $book: bookInput!) {\n    updateBook(bookId: $id, book: $book) {\n      id\n      ...App_detail\n    }\n  }\n`;\n\nfunction Approot(props: any) {\n  const [commitupdate] = useMutation<ApprootupdateBookQuery>(appMutateupdatequery);\n\n  const data = useLazyLoadQuery<ApprootQuery>(appquery, {},{fetchPolicy: 'store-or-network'});\n  // console.log(\"approot......\")\n  // console.log(data);\n\n\n\n  /*\n\n  The useRelayEnvironment().getStore() function returns a Store object from the Relay Modern library. The type of object returned depends on the method called on the Store object.\n\n  Calling getStore().getSource() returns a RecordSource object, which is an interface for reading and writing records in the store.\n\n  Calling getStore().getSource().get(<dataID>) returns a RecordProxy object, which is a mutable interface for a single record in the store with the specified dataID.\n\n  Calling getStore().getSource().get(<selector>) returns a RecordSourceSelectorProxy object, which is a mutable interface for a set of records in the store that match the specified selector.\n\n  So, depending on which method is called on the Store object, the returned type could be either a RecordProxy or a RecordSourceSelectorProxy.\n\n\n\n\n  RelayModernStore is a central store for managing the data cache of a Relay application, \n  while RelayRecordSourceSelectorProxy is a lower-level API for reading from and writing to\n  specific pieces of data in the store.\n\n\n\n\n\n  */\n\n  /*\n\n  Doc refering: \n\n  */\n  console.log(\"Type: RelayModernStore\")\n  console.log(useRelayEnvironment().getStore())\n  console.log(\"Type: RelayRecordSource\")\n  console.log(useRelayEnvironment().getStore().getSource())\n  // console.log(typeof useRelayEnvironment().getStore().getSource())\n  // console.log(useRelayEnvironment().getStore().getSource())\n  // console.log(typeof useRelayEnvironment().getStore().getSource().get(\"1\"))\n  // console.log(useRelayEnvironment().getStore().getSource().get(\"1\"))\n  // console.log(typeof useRelayEnvironment().getStore().getSource().getRecordIDs())\n  // console.log(useRelayEnvironment().getStore().getSource().getRecordIDs())\n\n  return (\n    <React.Suspense fallback={<div>Loading.....</div>}>\n      <App books={data.books[0]} />\n      <form\n        className=\"form\"\n        onSubmit={(e: any) => {\n          e.preventDefault();\n\n          let update: any = {\n            id: e.target[0].value,\n            book:{\n              id: e.target[0].value,\n              title: e.target[1].value,\n              author: {\n                id: e.target[2].value,\n                firstname: e.target[3].value,\n                secondname: e.target[4].value\n              }\n            }\n          };\n\n          commitupdate({\n            variables: update,\n            onCompleted: (response, errors) => {\n              console.log(\"Response received from server.\");\n            },\n            updater: (store) => {\n\n              console.log(\"in mutaiton\");\n\n\n              console.log(\"Type: RelayRecordSourceSelectorProxy\")\n              console.log(store);\n\n\n              (window as any).store = store;\n            },\n            onError: (err) => console.error(err),\n          });\n        }}\n      >\n        <label htmlFor=\"fname\">Book id:</label>\n        <input type=\"number\" id=\"fname\" placeholder=\"Type Book id\" /> <br></br>\n        <label htmlFor=\"fname\">Book title:</label>\n        <input type=\"text\" id=\"fname\" placeholder=\"Type Book title\" /> <br></br>\n        <label htmlFor=\"fname\">This author id:</label>\n        <input type=\"text\" id=\"fname\" placeholder=\"Type Book title\" /> <br></br>\n        <label htmlFor=\"fname\">Author firstname:</label>\n        <input type=\"text\" id=\"fname\" placeholder=\"Type Book title\" /> <br></br>\n        <label htmlFor=\"fname\">Author secondname:</label>\n        <input type=\"text\" id=\"fname\" placeholder=\"Type Book title\" /> <br></br>\n        <input type=\"submit\" />\n      </form>\n    </React.Suspense>\n  );\n}\n\nexport default Approot;\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAA6C,OAA7C;AACA,OAAOC,GAAP,MAAgB,OAAhB;AAEA,SAASC,gBAAT,EAA2BC,WAA3B,EAAwCC,mBAAxC,QAAmE,mBAAnE;;AAYA,MAAMC,QAAQ,8WAAd;AAUA,MAAMC,oBAAoB,8bAA1B;;AAWA,SAASC,OAAT,CAAiBC,KAAjB,EAA6B;EAAA;;EAC3B,MAAM,CAACC,YAAD,IAAiBN,WAAW,CAAyBG,oBAAzB,CAAlC;EAEA,MAAMI,IAAI,GAAGR,gBAAgB,CAAeG,QAAf,EAAyB,EAAzB,EAA4B;IAACM,WAAW,EAAE;EAAd,CAA5B,CAA7B,CAH2B,CAI3B;EACA;;EAIA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAcE;AACF;AACA;;EAGEC,OAAO,CAACC,GAAR,CAAY,wBAAZ;EACAD,OAAO,CAACC,GAAR,CAAYT,mBAAmB,GAAGU,QAAtB,EAAZ;EACAF,OAAO,CAACC,GAAR,CAAY,yBAAZ;EACAD,OAAO,CAACC,GAAR,CAAYT,mBAAmB,GAAGU,QAAtB,GAAiCC,SAAjC,EAAZ,EA1C2B,CA2C3B;EACA;EACA;EACA;EACA;EACA;;EAEA,oBACE,QAAC,KAAD,CAAO,QAAP;IAAgB,QAAQ,eAAE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAA1B;IAAA,wBACE,QAAC,GAAD;MAAK,KAAK,EAAEL,IAAI,CAACM,KAAL,CAAW,CAAX;IAAZ;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MACE,SAAS,EAAC,MADZ;MAEE,QAAQ,EAAGC,CAAD,IAAY;QACpBA,CAAC,CAACC,cAAF;QAEA,IAAIC,MAAW,GAAG;UAChBC,EAAE,EAAEH,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC,KADA;UAEhBC,IAAI,EAAC;YACHH,EAAE,EAAEH,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC,KADb;YAEHE,KAAK,EAAEP,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC,KAFhB;YAGHG,MAAM,EAAE;cACNL,EAAE,EAAEH,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC,KADV;cAENI,SAAS,EAAET,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC,KAFjB;cAGNK,UAAU,EAAEV,CAAC,CAACI,MAAF,CAAS,CAAT,EAAYC;YAHlB;UAHL;QAFW,CAAlB;QAaAb,YAAY,CAAC;UACXmB,SAAS,EAAET,MADA;UAEXU,WAAW,EAAE,CAACC,QAAD,EAAWC,MAAX,KAAsB;YACjCnB,OAAO,CAACC,GAAR,CAAY,gCAAZ;UACD,CAJU;UAKXmB,OAAO,EAAGC,KAAD,IAAW;YAElBrB,OAAO,CAACC,GAAR,CAAY,aAAZ;YAGAD,OAAO,CAACC,GAAR,CAAY,sCAAZ;YACAD,OAAO,CAACC,GAAR,CAAYoB,KAAZ;YAGCC,MAAD,CAAgBD,KAAhB,GAAwBA,KAAxB;UACD,CAfU;UAgBXE,OAAO,EAAGC,GAAD,IAASxB,OAAO,CAACyB,KAAR,CAAcD,GAAd;QAhBP,CAAD,CAAZ;MAkBD,CApCH;MAAA,wBAsCE;QAAO,OAAO,EAAC,OAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAtCF,eAuCE;QAAO,IAAI,EAAC,QAAZ;QAAqB,EAAE,EAAC,OAAxB;QAAgC,WAAW,EAAC;MAA5C;QAAA;QAAA;QAAA;MAAA,QAvCF,oBAuCgE;QAAA;QAAA;QAAA;MAAA,QAvChE,eAwCE;QAAO,OAAO,EAAC,OAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAxCF,eAyCE;QAAO,IAAI,EAAC,MAAZ;QAAmB,EAAE,EAAC,OAAtB;QAA8B,WAAW,EAAC;MAA1C;QAAA;QAAA;QAAA;MAAA,QAzCF,oBAyCiE;QAAA;QAAA;QAAA;MAAA,QAzCjE,eA0CE;QAAO,OAAO,EAAC,OAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA1CF,eA2CE;QAAO,IAAI,EAAC,MAAZ;QAAmB,EAAE,EAAC,OAAtB;QAA8B,WAAW,EAAC;MAA1C;QAAA;QAAA;QAAA;MAAA,QA3CF,oBA2CiE;QAAA;QAAA;QAAA;MAAA,QA3CjE,eA4CE;QAAO,OAAO,EAAC,OAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA5CF,eA6CE;QAAO,IAAI,EAAC,MAAZ;QAAmB,EAAE,EAAC,OAAtB;QAA8B,WAAW,EAAC;MAA1C;QAAA;QAAA;QAAA;MAAA,QA7CF,oBA6CiE;QAAA;QAAA;QAAA;MAAA,QA7CjE,eA8CE;QAAO,OAAO,EAAC,OAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA9CF,eA+CE;QAAO,IAAI,EAAC,MAAZ;QAAmB,EAAE,EAAC,OAAtB;QAA8B,WAAW,EAAC;MAA1C;QAAA;QAAA;QAAA;MAAA,QA/CF,oBA+CiE;QAAA;QAAA;QAAA;MAAA,QA/CjE,eAgDE;QAAO,IAAI,EAAC;MAAZ;QAAA;QAAA;QAAA;MAAA,QAhDF;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuDD;;GAzGQ7B,O;UACgBJ,W,EAEVD,gB,EAqCDE,mB,EAEAA,mB;;;KA1CLG,O;AA2GT,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}
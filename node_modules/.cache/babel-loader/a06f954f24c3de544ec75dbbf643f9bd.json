{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/@babel/runtime/regenerator/index.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = progressMiddleware;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n/* eslint-disable no-await-in-loop */\n\n\nfunction createProgressHandler(opts) {\n  var _ref = opts || {},\n      onProgress = _ref.onProgress,\n      _ref$sizeHeader = _ref.sizeHeader,\n      sizeHeader = _ref$sizeHeader === void 0 ? 'Content-Length' : _ref$sizeHeader;\n\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n      var body, headers, totalResponseSize, totalSize, reader, completed, runningTotal, step, done, value, length;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              body = res.body, headers = res.headers;\n\n              if (body) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              totalResponseSize = headers.get(sizeHeader);\n              totalSize = null;\n\n              if (totalResponseSize !== null) {\n                totalSize = parseInt(totalResponseSize, 10);\n              }\n\n              reader = body.getReader();\n              completed = false;\n              runningTotal = 0;\n\n            case 9:\n              _context.next = 11;\n              return reader.read();\n\n            case 11:\n              step = _context.sent;\n              done = step.done, value = step.value;\n              length = value && value.length || 0;\n              completed = done;\n\n              if (!completed) {\n                runningTotal += length;\n                onProgress(runningTotal, totalSize);\n              }\n\n            case 16:\n              if (!completed) {\n                _context.next = 9;\n                break;\n              }\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\n\nfunction progressMiddleware(opts) {\n  var progressHandler = createProgressHandler(opts);\n\n  var mw = function mw(next) {\n    return /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(req) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return next(req);\n\n              case 2:\n                res = _context2.sent;\n                progressHandler(res.clone());\n                return _context2.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  };\n\n  mw.isRawMiddleware = true;\n  return mw;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","progressMiddleware","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","createProgressHandler","opts","_ref","onProgress","_ref$sizeHeader","sizeHeader","_ref2","mark","_callee","res","body","headers","totalResponseSize","totalSize","reader","completed","runningTotal","step","length","wrap","_callee$","_context","prev","next","abrupt","get","parseInt","getReader","read","sent","stop","_x","progressHandler","mw","_ref3","_callee2","req","_callee2$","_context2","clone","_x2","isRawMiddleware"],"sources":["/Users/anubhavgupta/Documents/react_learning/graphql-react/relay-store-learning/node_modules/react-relay-network-modern/lib/middlewares/progress.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = progressMiddleware;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n/* eslint-disable no-await-in-loop */\nfunction createProgressHandler(opts) {\n  var _ref = opts || {},\n      onProgress = _ref.onProgress,\n      _ref$sizeHeader = _ref.sizeHeader,\n      sizeHeader = _ref$sizeHeader === void 0 ? 'Content-Length' : _ref$sizeHeader;\n\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n      var body, headers, totalResponseSize, totalSize, reader, completed, runningTotal, step, done, value, length;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              body = res.body, headers = res.headers;\n\n              if (body) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              totalResponseSize = headers.get(sizeHeader);\n              totalSize = null;\n\n              if (totalResponseSize !== null) {\n                totalSize = parseInt(totalResponseSize, 10);\n              }\n\n              reader = body.getReader();\n              completed = false;\n              runningTotal = 0;\n\n            case 9:\n              _context.next = 11;\n              return reader.read();\n\n            case 11:\n              step = _context.sent;\n              done = step.done, value = step.value;\n              length = value && value.length || 0;\n              completed = done;\n\n              if (!completed) {\n                runningTotal += length;\n                onProgress(runningTotal, totalSize);\n              }\n\n            case 16:\n              if (!completed) {\n                _context.next = 9;\n                break;\n              }\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\n\nfunction progressMiddleware(opts) {\n  var progressHandler = createProgressHandler(opts);\n\n  var mw = function mw(next) {\n    return /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req) {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return next(req);\n\n              case 2:\n                res = _context2.sent;\n                progressHandler(res.clone());\n                return _context2.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  };\n\n  mw.isRawMiddleware = true;\n  return mw;\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}